(this["webpackJsonpstock-charts"]=this["webpackJsonpstock-charts"]||[]).push([[0],{148:function(t,e,n){"use strict";n.r(e);var a={};n.r(a),n.d(a,"stocksWatcher",(function(){return ht}));var c=n(3),r=n.n(c),o=n(19),s=n.n(o),u=(n(71),n(72),n(17)),i=n(9),l=n.n(i),d=n(8),h=n(26),b=n(57),p=n(58),j=n(30),f=n(64),O=n(62),v=n(39),k=n(28),x=n(40),g=n(51),y=n.n(g),S=(n(81),n(6)),m=function(t){var e=new Date,n=t.allStockNames,a=t.updateSelectedStocks,r=t.updateStartDate,o=t.updateEndDate,s=Object(c.useState)(new Date(e.getFullYear(),e.getMonth(),e.getDate()-7)),u=Object(x.a)(s,2),i=u[0],l=u[1],d=Object(c.useState)(e),h=Object(x.a)(d,2),b=h[0],p=h[1],j=Object(c.useState)([""]),f=Object(x.a)(j,2),O=f[0],v=f[1],g=function(t){var e=Object(k.a)(O);t?(e.push(n[0].symbol),console.log(e),v(e),a(e)):(e.pop(),console.log(e),v(e),a(e))};return Object(S.jsxs)("div",{children:[Object(S.jsxs)("span",{children:["Start Date: ",Object(S.jsx)(y.a,{selected:i,onChange:function(t){return function(t){l(t),r(Math.round(t.getTime()/1e3))}(t)}}),"End Date: ",Object(S.jsx)(y.a,{selected:b,onChange:function(t){return function(t){p(t),o(Math.round(t.getTime()/1e3))}(t)}})]}),Object(S.jsxs)("span",{children:[O.length<1&&Object(S.jsx)("select",{value:O[0],onChange:function(t){var e=Object(k.a)(O);e[0]=t.target.value,v(e),a(e)},children:n.map((function(t){return Object(S.jsx)("option",{value:t.symbol,children:t.name})}))}),O.length>1&&Object(S.jsx)("select",{value:O[1],onChange:function(t){var e=Object(k.a)(O);e[1]=t.target.value,v(e),a(e)},children:n.map((function(t,e){return Object(S.jsx)("option",{value:t.symbol,children:t.name})}))}),O.length>2&&Object(S.jsx)("select",{value:O[2],onChange:function(t){var e=Object(k.a)(O);e[2]=t.target.value,v(e),a(e)},children:n.map((function(t){return Object(S.jsx)("option",{value:t.symbol,children:t.name})}))}),O.length<3&&n.length>0&&Object(S.jsx)("button",{onClick:function(){return g(!0)},children:"Add Stock"}),O.length>1&&Object(S.jsx)("button",{onClick:function(){return g(!1)},children:"Remove Stock"})]})]})},D="FETCH_STOCKS",T="FETCH_STOCKS_SUCCESS",E="FETCH_STOCKS_FAILURE",_="UPDATE_SELECTED_STOCKS",w="ADD_SELECTED_STOCK_DATE",C=function(t){return{type:T,payload:{stocks:t}}},A="UPDATE_START_DATE",U="UPDATE_END_DATE",P=function(t){var e=[];return t.stocks.stocks.slice(0,100).forEach((function(t){return e.push({name:t.description,symbol:t.symbol})})),e},F=function(t){return t.stocks.selectedStocks},M=function(t,e){var n=P(t),a=function(t){return t.stocks.selectedStockData}(t),c=[];return a.forEach((function(t,a){if(null===t||void 0===t?void 0:t.t){for(var r=[],o=0;o<t.t.length;o++)"c"===e?r.push([(new Date).setUTCSeconds(t.t[o]),t.c[o]]):"h"===e?r.push([(new Date).setUTCSeconds(t.t[o]),t.h[o]]):"l"===e?r.push([(new Date).setUTCSeconds(t.t[o]),t.l[o]]):"o"===e&&r.push([(new Date).setUTCSeconds(t.t[o]),t.o[o]]);c.push({label:n[a].name,data:r})}})),c},L=Object(u.b)((function(t){return{allStockNames:P(t)}}),(function(t){return{updateSelectedStocks:function(e){return t(function(t){return{type:_,payload:{stocks:t}}}(e))},updateStartDate:function(e){return t(function(t){return{type:A,payload:{date:t}}}(e))},updateEndDate:function(e){return t(function(t){return{type:U,payload:{date:t}}}(e))}}}))(m),N=n(61),R=function(t){var e=t.chartData,n=r.a.useMemo((function(){return{showPoints:!0}}),[]);return Object(S.jsx)("div",{children:Object(S.jsx)("div",{style:{height:"600px"},children:e.length>0&&Object(S.jsx)(N.Chart,{style:{maxHeight:"500px",maxWidth:"inherit"},series:n,data:e,axes:[{primary:!0,type:"time",position:"bottom"},{type:"linear",position:"left"}]})})})},I=Object(u.b)((function(t,e){var n=e.dataType;return{chartData:M(t,n)}}),(function(){return{}}))(R),H=function(t){Object(f.a)(a,t);var e=Object(O.a)(a);function a(t){var n;return Object(b.a)(this,a),(n=e.call(this,t)).state={alerted:!1,dataType:"c"},n.changeDataType=n.changeDataType.bind(Object(j.a)(n)),n}return Object(p.a)(a,[{key:"notifyPhone",value:function(){var t=Object(h.a)(l.a.mark((function t(){var e,a,c,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=n(128),t.next=3,e.v4();case 3:a=t.sent,c=v.isMobile?"".concat(v.mobileVendor," ").concat(v.mobileModel):navigator.platform,r="https://maker.ifttt.com/trigger/site_visited/with/key/b_Yu8_AU_JIDYDYR_WXF5-?value1="+a+"&value2="+c+"&value3=Stocks",this.state.alerted||(fetch(r,{method:"post"}),this.setState(Object(d.a)(Object(d.a)({},this.state),{},{alerted:!0})));case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){(0,this.props.fetchAllStocks)()}},{key:"changeDataType",value:function(t){this.setState(Object(d.a)(Object(d.a)({},this.state),{},{dataType:t.target.value}))}},{key:"render",value:function(){this.notifyPhone();var t=this.state.dataType;return Object(S.jsxs)("div",{children:[Object(S.jsx)("h3",{children:"Select up to 3 stocks and a Date Range"}),Object(S.jsx)(L,{}),Object(S.jsxs)("select",{value:t,onChange:this.changeDataType,children:[Object(S.jsx)("option",{value:"c",children:"Close Price"}),Object(S.jsx)("option",{value:"h",children:"High Price"}),Object(S.jsx)("option",{value:"l",children:"Low Price"}),Object(S.jsx)("option",{value:"o",children:"Open Price"})]}),Object(S.jsx)(I,{dataType:t})]})}}]),a}(c.Component),K=H,X=Object(u.b)((function(){return{}}),(function(t){return{fetchAllStocks:function(){return t({type:D})}}}))(K);var Y=function(){return Object(S.jsx)("div",{className:"App",children:Object(S.jsx)(X,{})})},J=n(18),V=n(63),W={stocks:[],selectedStocks:["","",""],selectedStockData:[],error:null},B=function(t,e){return Object(d.a)(Object(d.a)({},t),{},{stocks:e.payload.stocks})},q=function(t,e){return Object(d.a)(Object(d.a)({},t),{},{error:e.payload.error})},z=function(t,e){return Object(d.a)(Object(d.a)({},t),{},{selectedStocks:e.payload.stocks})},G=function(t,e){return Object(d.a)(Object(d.a)({},t),{},{selectedStockData:e.payload.data})},Q=new Date,Z={startDate:Math.round(Q.getTime()/1e3-604800),endDate:Math.round(Q.getTime()/1e3)},$=function(t,e){return Object(d.a)(Object(d.a)({},t),{},{startDate:e.payload.date})},tt=function(t,e){return Object(d.a)(Object(d.a)({},t),{},{endDate:e.payload.date})},et=Object(J.b)({stocks:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case T:return B(t,e);case E:return q(t,e);case _:return z(t,e);case w:return G(t,e);default:return t}},dates:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case A:return $(t,e);case U:return tt(t,e);default:return t}}}),nt=n(11),at=function(t){return t.dates.startDate},ct=function(t){return t.dates.endDate},rt=l.a.mark(ut),ot=l.a.mark(lt),st=function(){var t=Object(h.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"https://finnhub.io/api/v1/stock/symbol?exchange=US&token=c6ck9eiad3i95gi9dn2g",t.next=3,fetch("https://finnhub.io/api/v1/stock/symbol?exchange=US&token=c6ck9eiad3i95gi9dn2g").then((function(t){return t.json()}));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();function ut(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(nt.a)(st);case 3:return t=e.sent,e.next=6,Object(nt.b)(C(t));case 6:e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(0),e.next=12,Object(nt.b)((n=e.t0,{type:E,payload:{error:n}}));case 12:case"end":return e.stop()}var n}),rt,null,[[0,8]])}var it=function(){var t=Object(h.a)(l.a.mark((function t(e,n,a){var c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c="https://finnhub.io/api/v1/stock/candle?symbol=".concat(a,"&resolution=1&from=").concat(e,"&to=").concat(n,"&token=c6ck9eiad3i95gi9dn2g"),t.next=3,fetch(c).then((function(t){return t.json()}));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}();function lt(){var t,e,n,a,c,r;return l.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,Object(nt.c)(at);case 3:return t=o.sent,o.next=6,Object(nt.c)(ct);case 6:return e=o.sent,o.next=9,Object(nt.c)(F);case 9:n=o.sent,a=[],c=0;case 12:if(!(c<n.length)){o.next=20;break}return o.next=15,Object(nt.a)(it,t,e,n[c]);case 15:r=o.sent,a.push(r);case 17:c++,o.next=12;break;case 20:return o.next=22,Object(nt.b)({type:w,payload:{data:a}});case 22:o.next=27;break;case 24:o.prev=24,o.t0=o.catch(0),console.log(o.t0);case 27:case"end":return o.stop()}}),ot,null,[[0,24]])}var dt=l.a.mark(ht);function ht(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(nt.d)(D,ut);case 2:return t.next=4,Object(nt.d)(_,lt);case 4:return t.next=6,Object(nt.d)(A,lt);case 6:return t.next=8,Object(nt.d)(U,lt);case 8:case"end":return t.stop()}}),dt)}var bt=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,155)).then((function(e){var n=e.getCLS,a=e.getFID,c=e.getFCP,r=e.getLCP,o=e.getTTFB;n(t),a(t),c(t),r(t),o(t)}))},pt=function(t){var e=Object(V.a)(),n=Object(J.c)(Object(J.a)(e),window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__({name:"stock-charts"}):function(t){return t}),c=Object(J.d)(et,t,n);return Object.keys(a).forEach((function(t){e.run(a[t])})),c}({});s.a.render(Object(S.jsx)(u.a,{store:pt,children:Object(S.jsx)(Y,{})}),document.getElementById("root")),bt()},71:function(t,e,n){},72:function(t,e,n){}},[[148,1,2]]]);
//# sourceMappingURL=main.5eff99b2.chunk.js.map