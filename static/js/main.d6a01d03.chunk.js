(this["webpackJsonpstock-charts"]=this["webpackJsonpstock-charts"]||[]).push([[0],{148:function(t,e,n){"use strict";n.r(e);var a={};n.r(a),n.d(a,"stocksWatcher",(function(){return dt}));var c=n(3),r=n(19),o=n.n(r),s=(n(71),n(72),n(17)),u=n(9),i=n.n(u),l=n(8),d=n(26),h=n(57),b=n(58),p=n(30),j=n(64),f=n(62),O=n(39),v=n(28),x=n(40),k=n(51),g=n.n(k),y=(n(81),n(6)),S=function(t){var e=new Date,n=t.allStockNames,a=t.updateSelectedStocks,r=t.updateStartDate,o=t.updateEndDate,s=Object(c.useState)(new Date(e.getFullYear(),e.getMonth(),e.getDate()-7)),u=Object(x.a)(s,2),i=u[0],l=u[1],d=Object(c.useState)(e),h=Object(x.a)(d,2),b=h[0],p=h[1],j=Object(c.useState)([""]),f=Object(x.a)(j,2),O=f[0],k=f[1],S=function(t){var e=Object(v.a)(O);t?(e.push(n[0].symbol),console.log(e),k(e),a(e)):(e.pop(),console.log(e),k(e),a(e))};return Object(y.jsxs)("div",{children:[Object(y.jsxs)("span",{children:["Start Date: ",Object(y.jsx)(g.a,{selected:i,onChange:function(t){return function(t){l(t),r(Math.round(t.getTime()/1e3))}(t)}}),"End Date: ",Object(y.jsx)(g.a,{selected:b,onChange:function(t){return function(t){p(t),o(Math.round(t.getTime()/1e3))}(t)}})]}),Object(y.jsxs)("span",{children:[O.length<1&&Object(y.jsx)("select",{value:O[0],onChange:function(t){var e=Object(v.a)(O);e[0]=t.target.value,k(e),a(e)},children:n.map((function(t){return Object(y.jsx)("option",{value:t.symbol,children:t.name})}))}),O.length>1&&Object(y.jsx)("select",{value:O[1],onChange:function(t){var e=Object(v.a)(O);e[1]=t.target.value,k(e),a(e)},children:n.map((function(t,e){return Object(y.jsx)("option",{value:t.symbol,children:t.name})}))}),O.length>2&&Object(y.jsx)("select",{value:O[2],onChange:function(t){var e=Object(v.a)(O);e[2]=t.target.value,k(e),a(e)},children:n.map((function(t){return Object(y.jsx)("option",{value:t.symbol,children:t.name})}))}),O.length<3&&Object(y.jsx)("button",{onClick:function(){return S(!0)},children:"Add Stock"}),O.length>1&&Object(y.jsx)("button",{onClick:function(){return S(!1)},children:"Remove Stock"})]})]})},m="FETCH_STOCKS",D="FETCH_STOCKS_SUCCESS",T="FETCH_STOCKS_FAILURE",E="UPDATE_SELECTED_STOCKS",C="ADD_SELECTED_STOCK_DATE",w=function(t){return{type:D,payload:{stocks:t}}},_="UPDATE_START_DATE",A="UPDATE_END_DATE",U=function(t){var e=[];return t.stocks.stocks.slice(0,100).forEach((function(t){return e.push({name:t.description,symbol:t.symbol})})),e},P=function(t){return t.stocks.selectedStocks},F=function(t,e){var n=U(t),a=function(t){return t.stocks.selectedStockData}(t),c=[];return a.forEach((function(t,a){if(null===t||void 0===t?void 0:t.t){for(var r=[],o=0;o<t.t.length;o++)"c"===e?r.push([(new Date).setUTCSeconds(t.t[o]),t.c[o]]):"h"===e?r.push([(new Date).setUTCSeconds(t.t[o]),t.h[o]]):"l"===e?r.push([(new Date).setUTCSeconds(t.t[o]),t.l[o]]):"o"===e&&r.push([(new Date).setUTCSeconds(t.t[o]),t.o[o]]);c.push({label:n[a].name,data:r})}})),c},L=Object(s.b)((function(t){return{allStockNames:U(t)}}),(function(t){return{updateSelectedStocks:function(e){return t(function(t){return{type:E,payload:{stocks:t}}}(e))},updateStartDate:function(e){return t(function(t){return{type:_,payload:{date:t}}}(e))},updateEndDate:function(e){return t(function(t){return{type:A,payload:{date:t}}}(e))}}}))(S),M=n(61),N=function(t){var e=t.chartData;return Object(y.jsx)("div",{children:Object(y.jsx)("div",{style:{height:"600px"},children:e.length>0&&Object(y.jsx)(M.Chart,{style:{maxHeight:"500px",maxWidth:"inherit"},data:e,axes:[{primary:!0,type:"time",position:"bottom"},{type:"linear",position:"left"}]})})})},R=Object(s.b)((function(t,e){var n=e.dataType;return{chartData:F(t,n)}}),(function(){return{}}))(N),H=function(t){Object(j.a)(a,t);var e=Object(f.a)(a);function a(t){var n;return Object(h.a)(this,a),(n=e.call(this,t)).state={alerted:!1,dataType:"c"},n.changeDataType=n.changeDataType.bind(Object(p.a)(n)),n}return Object(b.a)(a,[{key:"notifyPhone",value:function(){var t=Object(d.a)(i.a.mark((function t(){var e,a,c,r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=n(128),t.next=3,e.v4();case 3:a=t.sent,c=O.isMobile?"".concat(O.mobileVendor," ").concat(O.mobileModel):navigator.platform,r="https://raj.bariah.com:2010/location?ipAddress="+a+"&device="+c+"&site=Stocks",this.state.alerted||(fetch(r,{method:"post"}),this.setState(Object(l.a)(Object(l.a)({},this.state),{},{alerted:!0})));case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){(0,this.props.fetchAllStocks)()}},{key:"changeDataType",value:function(t){this.setState(Object(l.a)(Object(l.a)({},this.state),{},{dataType:t.target.value}))}},{key:"render",value:function(){var t=this.state.dataType;return Object(y.jsxs)("div",{children:[Object(y.jsx)("h3",{children:"Select up to 3 stocks and a Date Range"}),Object(y.jsx)(L,{}),Object(y.jsxs)("select",{value:t,onChange:this.changeDataType,children:[Object(y.jsx)("option",{value:"c",children:"Close Price"}),Object(y.jsx)("option",{value:"h",children:"High Price"}),Object(y.jsx)("option",{value:"l",children:"Low Price"}),Object(y.jsx)("option",{value:"o",children:"Open Price"})]}),Object(y.jsx)(R,{dataType:t})]})}}]),a}(c.Component),I=H,K=Object(s.b)((function(){return{}}),(function(t){return{fetchAllStocks:function(){return t({type:m})}}}))(I);var X=function(){return Object(y.jsx)("div",{className:"App",children:Object(y.jsx)(K,{})})},V=n(18),B=n(63),J={stocks:[],selectedStocks:["","",""],selectedStockData:[],error:null},W=function(t,e){return Object(l.a)(Object(l.a)({},t),{},{stocks:e.payload.stocks})},Y=function(t,e){return Object(l.a)(Object(l.a)({},t),{},{error:e.payload.error})},q=function(t,e){return Object(l.a)(Object(l.a)({},t),{},{selectedStocks:e.payload.stocks})},z=function(t,e){return Object(l.a)(Object(l.a)({},t),{},{selectedStockData:e.payload.data})},G=new Date,Q={startDate:Math.round(G.getTime()/1e3-604800),endDate:Math.round(G.getTime()/1e3)},Z=function(t,e){return Object(l.a)(Object(l.a)({},t),{},{startDate:e.payload.date})},$=function(t,e){return Object(l.a)(Object(l.a)({},t),{},{endDate:e.payload.date})},tt=Object(V.b)({stocks:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case D:return W(t,e);case T:return Y(t,e);case E:return q(t,e);case C:return z(t,e);default:return t}},dates:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case _:return Z(t,e);case A:return $(t,e);default:return t}}}),et=n(11),nt=function(t){return t.dates.startDate},at=function(t){return t.dates.endDate},ct=i.a.mark(st),rt=i.a.mark(it),ot=function(){var t=Object(d.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"https://finnhub.io/api/v1/stock/symbol?exchange=US&token=c6ck9eiad3i95gi9dn2g",t.next=3,fetch("https://finnhub.io/api/v1/stock/symbol?exchange=US&token=c6ck9eiad3i95gi9dn2g").then((function(t){return t.json()}));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();function st(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(et.a)(ot);case 3:return t=e.sent,e.next=6,Object(et.b)(w(t));case 6:e.next=12;break;case 8:return e.prev=8,e.t0=e.catch(0),e.next=12,Object(et.b)((n=e.t0,{type:T,payload:{error:n}}));case 12:case"end":return e.stop()}var n}),ct,null,[[0,8]])}var ut=function(){var t=Object(d.a)(i.a.mark((function t(e,n,a){var c;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c="https://finnhub.io/api/v1/stock/candle?symbol=".concat(a,"&resolution=1&from=").concat(e,"&to=").concat(n,"&token=c6ck9eiad3i95gi9dn2g"),t.next=3,fetch(c).then((function(t){return t.json()}));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}();function it(){var t,e,n,a,c,r;return i.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,Object(et.c)(nt);case 3:return t=o.sent,o.next=6,Object(et.c)(at);case 6:return e=o.sent,o.next=9,Object(et.c)(P);case 9:n=o.sent,a=[],c=0;case 12:if(!(c<n.length)){o.next=20;break}return o.next=15,Object(et.a)(ut,t,e,n[c]);case 15:r=o.sent,a.push(r);case 17:c++,o.next=12;break;case 20:return o.next=22,Object(et.b)({type:C,payload:{data:a}});case 22:o.next=27;break;case 24:o.prev=24,o.t0=o.catch(0),console.log(o.t0);case 27:case"end":return o.stop()}}),rt,null,[[0,24]])}var lt=i.a.mark(dt);function dt(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(et.d)(m,st);case 2:return t.next=4,Object(et.d)(E,it);case 4:return t.next=6,Object(et.d)(_,it);case 6:return t.next=8,Object(et.d)(A,it);case 8:case"end":return t.stop()}}),lt)}var ht=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,155)).then((function(e){var n=e.getCLS,a=e.getFID,c=e.getFCP,r=e.getLCP,o=e.getTTFB;n(t),a(t),c(t),r(t),o(t)}))},bt=function(t){var e=Object(B.a)(),n=Object(V.c)(Object(V.a)(e),window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__({name:"stock-charts"}):function(t){return t}),c=Object(V.d)(tt,t,n);return Object.keys(a).forEach((function(t){e.run(a[t])})),c}({});o.a.render(Object(y.jsx)(s.a,{store:bt,children:Object(y.jsx)(X,{})}),document.getElementById("root")),ht()},71:function(t,e,n){},72:function(t,e,n){}},[[148,1,2]]]);
//# sourceMappingURL=main.d6a01d03.chunk.js.map